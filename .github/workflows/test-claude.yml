name: Test Claude Code Runner

on:
  workflow_dispatch:

jobs:
  test:
    runs-on: [self-hosted, claude-code]
    steps:
      - uses: actions/checkout@v4

      - name: Verify Claude Code
        run: |
          echo "Node version:"
          node --version
          echo "Claude Code version:"
          claude --version

      - name: Test Claude
        run: |
          claude -p "Say hello and confirm you're running in a GitHub Actions workflow" \
            --max-turns 1 \
            --allowedTools "Read"
